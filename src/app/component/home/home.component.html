<div *ngIf="isLoading" class="loading-container">
  <mat-spinner></mat-spinner>
</div>
<div *ngIf="!isLoading">
  <div *ngIf="pcs.length > 0; else noProducts" class="products-grid">
    <div *ngFor="let product of pcs" class="product-card">
      <div class="product-image-container">
        <img *ngIf="product.image" [src]="getImageSrc(product.image)" alt="{{ product.name }}" class="product-image" [routerLink]="['/product', product.id]"/>
      </div>
      <div class="product-info-container">
        <div class="product-info">
          <h2 [routerLink]="['/product', product.id]">{{ product.name | truncate:50}}</h2>
          <p>Price: €{{ product.price }}</p>
          <p *ngIf="product.pcType">Type: {{ product.pcType }}</p>
          <p *ngIf="product.pcPartType">Type: {{ product.pcPartType }}</p>
          <p *ngIf="product.peripheralType">Type: {{ product.peripheralType }}</p>
          <p *ngIf="product.softwareType">Type: {{ product.softwareType }}</p>
          <p *ngIf="product.usedState">State: {{ product.usedState }}</p>
        </div>
        <div class="button-container">
          <button mat-raised-button color="primary" (click)="addToCart(product)">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="pcParts.length > 0; else noProducts" class="products-grid">
    <div *ngFor="let product of pcParts" class="product-card">
      <div class="product-image-container">
        <img *ngIf="product.image" [src]="getImageSrc(product.image)" alt="{{ product.name }}" class="product-image" [routerLink]="['/product', product.id]"/>
      </div>
      <div class="product-info-container">
        <div class="product-info">
          <h2 [routerLink]="['/product', product.id]">{{ product.name | truncate:50}}</h2>
          <p>Price: €{{ product.price }}</p>
          <p *ngIf="product.pcType">Type: {{ product.pcType }}</p>
          <p *ngIf="product.pcPartType">Type: {{ product.pcPartType }}</p>
          <p *ngIf="product.peripheralType">Type: {{ product.peripheralType }}</p>
          <p *ngIf="product.softwareType">Type: {{ product.softwareType }}</p>
          <p *ngIf="product.usedState">State: {{ product.usedState }}</p>
        </div>
        <div class="button-container">
          <button mat-raised-button color="primary" (click)="addToCart(product)">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="peripherals.length > 0; else noProducts" class="products-grid">
    <div *ngFor="let product of peripherals" class="product-card">
      <div class="product-image-container">
        <img *ngIf="product.image" [src]="getImageSrc(product.image)" alt="{{ product.name }}" class="product-image" [routerLink]="['/product', product.id]"/>
      </div>
      <div class="product-info-container">
        <div class="product-info">
          <h2 [routerLink]="['/product', product.id]">{{ product.name | truncate:50}}</h2>
          <p>Price: €{{ product.price }}</p>
          <p *ngIf="product.pcType">Type: {{ product.pcType }}</p>
          <p *ngIf="product.pcPartType">Type: {{ product.pcPartType }}</p>
          <p *ngIf="product.peripheralType">Type: {{ product.peripheralType }}</p>
          <p *ngIf="product.softwareType">Type: {{ product.softwareType }}</p>
          <p *ngIf="product.usedState">State: {{ product.usedState }}</p>
        </div>
        <div class="button-container">
          <button mat-raised-button color="primary" (click)="addToCart(product)">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="software.length > 0; else noProducts" class="products-grid">
    <div *ngFor="let product of software" class="product-card">
      <div class="product-image-container">
        <img *ngIf="product.image" [src]="getImageSrc(product.image)" alt="{{ product.name }}" class="product-image" [routerLink]="['/product', product.id]"/>
      </div>
      <div class="product-info-container">
        <div class="product-info">
          <h2 [routerLink]="['/product', product.id]">{{ product.name | truncate:50}}</h2>
          <p>Price: €{{ product.price }}</p>
          <p *ngIf="product.pcType">Type: {{ product.pcType }}</p>
          <p *ngIf="product.pcPartType">Type: {{ product.pcPartType }}</p>
          <p *ngIf="product.peripheralType">Type: {{ product.peripheralType }}</p>
          <p *ngIf="product.softwareType">Type: {{ product.softwareType }}</p>
          <p *ngIf="product.usedState">State: {{ product.usedState }}</p>
        </div>
        <div class="button-container">
          <button mat-raised-button color="primary" (click)="addToCart(product)">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noProducts>
    <p>No products available.</p>
  </ng-template>
</div>
